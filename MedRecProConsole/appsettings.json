{
  // ============================================================================
  // APPLICATION SETTINGS
  // ============================================================================

  "Application": {
    // Application version - update with each release
    "Version": "1.0.0",

    // Application name displayed in header
    "Name": "MedRecPro Console",

    // Application description
    "Description": "Bulk SPL & Orange Book Import Utility"
  },

  // ============================================================================
  // DATABASE CONNECTIONS
  // ============================================================================
  /*
    Predefined database connections that appear in the selection menu.
    Users can also enter a custom connection string at runtime.

    Properties:
    - Name: Display name in the selection menu
    - ConnectionString: Full connection string
    - IsDefault: If true, this connection is pre-selected (only one should be true)
  */
  "DatabaseConnections": [
    {
      "Name": "Local Database Dev (MedRecLocal)",
      "ConnectionString": "Server=localhost;Database=MedRecLocal;Integrated Security=True;TrustServerCertificate=True;Min Pool Size=5;Max Pool Size=100;Pooling=true;Connect Timeout=120;Encrypt=False;Application Intent=ReadWrite;Multi Subnet Failover=False",
      "IsDefault": true
    },
    {
      "Name": "Local Database Test",
      "ConnectionString": "Data Source=(localdb)\\MSSQLLocalDB;Database=MedRecLocal;Min Pool Size=5;Max Pool Size=100;Pooling=true;Integrated Security=True;Connect Timeout=30;Encrypt=False;Trust Server Certificate=False;Application Intent=ReadWrite;Multi Subnet Failover=False",
      "IsDefault": false
    }
  ],

  // ============================================================================
  // IMPORT SETTINGS
  // ============================================================================

  "ImportSettings": {
    // Default maximum runtime in minutes (null = no limit)
    // Valid range: 1-1440 (1 minute to 24 hours)
    "DefaultMaxRuntimeMinutes": null,

    // File extensions to process within ZIP files
    "ValidFileExtensions": [ ".xml" ],

    // Maximum number of errors to display in the console
    "MaxDisplayedErrors": 50,

    // Whether to prompt for confirmation before starting import
    "RequireConfirmation": true,

    // Whether to continue processing remaining ZIPs after a failure
    "ContinueOnError": true
  },

  // ============================================================================
  // LOGGING SETTINGS
  // ============================================================================

  "Logging": {
    // Minimum log level: Trace, Debug, Information, Warning, Error, Critical
    "MinimumLevel": "Warning",

    // Whether to log to console
    "EnableConsoleLogging": true,

    // Whether to log to file
    "EnableFileLogging": false,

    // Log file path (relative to application directory)
    "LogFilePath": "logs/import.log",

    // Maximum log file size in MB before rotation
    "MaxLogFileSizeMB": 10,

    // Number of log files to retain
    "RetainedLogFiles": 5
  },

  // ============================================================================
  // SECURITY SETTINGS
  // ============================================================================

  "Security": {
    // Encryption key for database ID encryption
    // IMPORTANT: This should match the key used by the main MedRecPro application
    // Change this key if you want to isolate imports to a separate dataset
    // The key is a SECRET and should be kept confidential
    "EncryptionKey": "MedRecProConsoleImportKey2024!"
  },

  // ============================================================================
  // FEATURE FLAGS
  // ============================================================================
  /*
    Feature flags control import behavior and performance optimizations.
    These should typically match the MedRecPro application settings.

    UseBulkOperations: Use bulk insert patterns for database operations
    UseBulkStagingOperations: Use staged bulk operations for section processing
    UseBatchSaving: Defer all save operations to end of parsing
    UseEnhancedDebugging: Enable verbose debug output
  */
  "FeatureFlags": {
    "UseBulkOperations": false,
    "UseBulkStagingOperations": true,
    "UseBatchSaving": true,
    "UseEnhancedDebugging": false
  },

  // ============================================================================
  // DISPLAY SETTINGS
  // ============================================================================

  "Display": {
    // Whether to clear console before displaying header
    "ClearConsoleOnStart": true,

    // Whether to show the figlet banner
    "ShowBanner": true,

    // Banner color: Blue, Green, Red, Yellow, Cyan, Magenta, White, Grey
    "BannerColor": "Blue",

    // Whether to show progress bars during import
    "ShowProgressBars": true,

    // Whether to show spinner animations
    "ShowSpinners": true
  },

  // ============================================================================
  // AUTOMATION SETTINGS
  // ============================================================================
  /*
    Settings for unattended operation via Windows Task Scheduler or command-line automation.
    These settings enable fully automated batch processing without user interaction.

    Example Task Scheduler usage:
      MedRecProConsole.exe --folder "C:\SPL\Imports" --auto-quit
      MedRecProConsole.exe --folder "C:\SPL\Imports" --connection "Local Database Dev" --time 120
      MedRecProConsole.exe --config "C:\Config\automation.json" --auto-quit
  */
  "Automation": {
    // Whether to automatically quit after processing completes (for scheduled tasks)
    "AutoQuitOnCompletion": true,

    // Default import folder when --folder is used without a path (optional)
    "DefaultImportFolder": null,

    // Default database connection name when --folder is specified without --connection
    // Must match a name from DatabaseConnections array, or uses first IsDefault=true connection
    "DefaultConnectionName": null,

    // Default max runtime in minutes for unattended imports (null = no limit)
    "DefaultMaxRuntimeMinutes": null,

    // Whether to suppress confirmation prompts in unattended mode
    "SuppressConfirmations": true,

    // Whether to log output to file during unattended operation
    "EnableUnattendedLogging": true,

    // Log file path for unattended operation (supports {date}, {datetime} placeholders)
    "UnattendedLogPath": "logs/unattended-{date}.log"
  },

  // ============================================================================
  // HELP DOCUMENTATION
  // ============================================================================
  /*
    Help topics displayed when user runs with --help or -h flag.
    Each topic has a title and description that can span multiple lines.
  */
  "Help": {
    "Topics": [
      {
        "Title": "Getting Started",
        "Description": "Run the application and follow the interactive prompts to select a database, specify an import folder, and optionally set a runtime limit."
      },
      {
        "Title": "Database Selection",
        "Description": "Choose from predefined database connections or enter a custom SQL Server connection string. The connection must have write access to create SPL data records."
      },
      {
        "Title": "Import Folder",
        "Description": "Specify a folder path containing SPL ZIP files. The application recursively scans all subdirectories for .zip files."
      },
      {
        "Title": "Runtime Limit",
        "Description": "Optionally set a maximum runtime (1-1440 minutes). The import gracefully stops when the limit is reached, completing the current file."
      },
      {
        "Title": "Error Handling",
        "Description": "Failed imports are logged but do not stop processing. Review the final report for error details and failed file names."
      },
      {
        "Title": "Exit Codes",
        "Description": "Exit code 0 indicates all imports succeeded. Exit code 1 indicates one or more failures or user cancellation."
      },
      {
        "Title": "Unattended Operation",
        "Description": "Use command-line arguments for Windows Task Scheduler automation. Pass --folder and optionally --connection, --time, and --auto-quit flags."
      },
      {
        "Title": "Orange Book Import",
        "Description": "Import FDA Orange Book products.txt from a ZIP file. Use the 'orange-book' command in interactive mode or --orange-book flag for unattended operation. Use --nuke to truncate all Orange Book tables before import."
      }
    ],

    "CommandLineOptions": [
      {
        "Option": "--help, -h",
        "Description": "Display this help information"
      },
      {
        "Option": "--version, -v",
        "Description": "Display application version"
      },
      {
        "Option": "--verbose, -V",
        "Description": "Enable verbose output (debug messages, orphan reports, EF warnings)"
      },
      {
        "Option": "--quiet, -q",
        "Description": "Minimal output mode - suppress non-essential messages"
      },
      {
        "Option": "--folder <path>",
        "Description": "Import folder path - enables unattended mode, uses default database if not specified"
      },
      {
        "Option": "--connection <name>",
        "Description": "Database connection name from appsettings.json (use with --folder)"
      },
      {
        "Option": "--time <minutes>",
        "Description": "Maximum runtime in minutes (1-1440) - gracefully stops when limit reached"
      },
      {
        "Option": "--auto-quit",
        "Description": "Exit immediately after import completes (for Task Scheduler)"
      },
      {
        "Option": "--config <path>",
        "Description": "Use alternate configuration file for automation settings"
      },
      {
        "Option": "--orange-book <zippath>",
        "Description": "Orange Book ZIP file path - imports products.txt (unattended mode)"
      },
      {
        "Option": "--nuke",
        "Description": "Truncate all Orange Book tables before import (use with --orange-book)"
      }
    ]
  }
}
