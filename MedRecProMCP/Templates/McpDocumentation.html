<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ServerName}} - Documentation</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; max-width: 900px; margin: 0 auto; padding: 2rem; background: #f5f5f5; }
        .container { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h1 { color: #333; border-bottom: 2px solid #007acc; padding-bottom: 0.5rem; }
        h2 { color: #007acc; margin-top: 2rem; }
        code { background: #f0f0f0; padding: 0.2rem 0.4rem; border-radius: 3px; font-family: 'Consolas', monospace; }
        pre { background: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 5px; overflow-x: auto; }
        pre code { background: none; color: inherit; }
        .endpoint { background: #e8f4fc; padding: 1rem; border-left: 4px solid #007acc; margin: 1rem 0; }
        .endpoint-method { font-weight: bold; color: #28a745; }
        a { color: #007acc; }
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        th, td { text-align: left; padding: 0.75rem; border-bottom: 1px solid #ddd; }
        th { background: #f8f9fa; }
    </style>
</head>
<body>
    <div class="container">
        <h1>{{ServerName}}</h1>
        <p><strong>Version:</strong> {{Version}}</p>
        <p>This MCP (Model Context Protocol) server provides secure access to MedRecPro medical records functionality for AI assistants like Claude.</p>

        <h2>Connecting with Claude Desktop</h2>
        <p>Add the following to your Claude Desktop configuration file:</p>
        <pre><code>{
  "mcpServers": {
    "medrecpro": {
      "url": "{{ServerUrl}}/mcp"
    }
  }
}</code></pre>

        <h2>Authentication</h2>
        <p>This server implements OAuth 2.1 with PKCE. When Claude connects, it will automatically handle the authentication flow:</p>
        <ol>
            <li>Claude discovers the Protected Resource Metadata at <code>/.well-known/oauth-protected-resource</code></li>
            <li>User is redirected to sign in with Google or Microsoft</li>
            <li>Upon successful authentication, Claude receives an MCP access token</li>
            <li>All subsequent tool calls include this token for authorization</li>
        </ol>

        <h2>Available Endpoints</h2>
        <table>
            <tr><th>Endpoint</th><th>Description</th></tr>
            <tr><td><code>GET /</code></td><td>Server status and info</td></tr>
            <tr><td><code>GET /mcp</code></td><td>MCP protocol endpoint (requires auth)</td></tr>
            <tr><td><code>GET /docs</code></td><td>This documentation page</td></tr>
            <tr><td><code>GET /.well-known/oauth-protected-resource</code></td><td>Protected Resource Metadata (RFC 9728)</td></tr>
            <tr><td><code>GET /.well-known/oauth-authorization-server</code></td><td>Authorization Server Metadata (RFC 8414)</td></tr>
            <tr><td><code>GET /oauth/authorize</code></td><td>OAuth authorization endpoint</td></tr>
            <tr><td><code>POST /oauth/token</code></td><td>Token exchange endpoint</td></tr>
            <tr><td><code>POST /oauth/register</code></td><td>Dynamic Client Registration (RFC 7591)</td></tr>
        </table>

        <h2>MCP Tools</h2>
        <p>Once authenticated, the following tool categories are available:</p>
        <ul>
            <li><strong>Drug Label Tools</strong> - Search and retrieve FDA drug label information</li>
            <li><strong>User Tools</strong> - Manage user profile and preferences</li>
        </ul>
        <p>Claude will automatically discover available tools when connecting to the <code>/mcp</code> endpoint.</p>

        <h2>Support</h2>
        <p>For questions or issues, visit <a href="https://www.medrecpro.com">www.medrecpro.com</a></p>
    </div>
</body>
</html>
