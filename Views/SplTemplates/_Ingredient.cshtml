@using MedRecPro.Models;
@using RazorLight.Razor;
@using MedRecPro.Helpers
@inherits RazorLight.TemplatePage<MedRecPro.Models.IngredientDto>
@model IngredientDto
@if (Model != null)
{
    if (Model.OriginatingElement?.ToLower() == "activeingredient")
    {
        <activeIngredient>
            <quantity>
                <numerator value="@Model.QuantityNumerator"
                           unit="@Model.QuantityNumeratorUnit">
                    @if (Model.NumeratorTranslationCode != null)
                    {
                        <translation code="@Model.NumeratorTranslationCode"
                                     codeSystem="@Model.NumeratorCodeSystem"
                                     displayName="@Model.NumeratorDisplayName"
                                     value="@Model.QuantityNumerator" />
                    }
                </numerator>
                <denominator value="@Model.QuantityDenominator">
                    @if (Model.DenominatorTranslationCode != null)
                    {
                        <translation code="@Model.DenominatorTranslationCode"
                                     codeSystem="@Model.DenominatorCodeSystem"
                                     displayName="@Model.DenominatorDisplayName"
                                     value="@Model.QuantityDenominator" />
                    }
                </denominator>
            </quantity>
            <activeIngredientSubstance>
                @foreach (var spec in Model.SpecifiedSubstances)
                {
                    <code code="@spec.SubstanceCode"
                          codeSystem="@spec.SubstanceCodeSystem"
                          codeSystemName="@spec.SubstanceCodeSystemName" />
                }
                <name>@Model.IngredientSubstance?.SubstanceName</name>
            </activeIngredientSubstance>
        </activeIngredient>
    }
    else
    {
        <inactiveIngredient>
            <inactiveIngredientSubstance>
                @foreach (var spec in Model.SpecifiedSubstances)
                {
                    <code code="@spec.SubstanceCode"
                          codeSystem="@spec.SubstanceCodeSystem"
                          codeSystemName="@spec.SubstanceCodeSystemName" />
                }
                <name>@Model.IngredientSubstance?.SubstanceName</name>
            </inactiveIngredientSubstance>
        </inactiveIngredient>
    }
}